<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

</head>
<body>


<canvas width="800" height="600" style="border: solid 1px #000000;">

</canvas>

<script src="js/canvas/context-2d.js"></script>
<script src="js/canvas/rectangle.js"></script>
<script src="js/canvas/styled-text.js"></script>
<script src="js/canvas/math-function.js"></script>
<script type="text/javascript">
    var GRAVEDAD = 9.8;

    /**
     * Velocidad final
     * @param {number} vx velocidad inicial horizontal
     * @param {number} vy velocidad inicial vertical
     * @param {number} ax  aceleración horizontal
     * @param {number} ay  aceleración vertical
     * @param {number} t tiempo
     * @return {{x: number, y: number}}
     */
    function velFinal(vx, vy, ax, ay, t) {
        return {
            x: vx + ax * t,
            y: vy + ay * t
        };
    }

    /**
     * Movimiento parabólico
     * @param {number} x posición horizontal inicial
     * @param {number} y posición vertical inicial
     * @param {number} vx velocidad horizontal inicial
     * @param {number} vy velocidad vertical inicial
     * @param {number} ax aceleración horizontal
     * @param {number} ay aceleración vertical
     * @param {number} t tiempo
     * @return {{x: number, y: number}}
     */
    function posFinal(x, y, vx, vy, ax, ay, t) {
        return {
            x: x + vx * t + .5 * ax * Math.pow(t, 2),
            y: y + vy * t + .5 * ay * Math.pow(t, 2)
        }
    }
</script>

<script type="text/javascript">
    var c = document.getElementsByTagName('canvas')[0];
    var canvas = new Canvas2d(c);

    var mathFn = new MathFunction(185, 358, function (t) {
        return posFinal(0, 0, 15, 10, 0, -GRAVEDAD, t/60);
    }, 0, 0, .5, null, null, 5, 'blue');

    var agua = new Rectangle(55, 260, 130, 100, 'rgba(0, 0, 255, .5');

    var info = new StyledText("", 790, 10, "bold large sans-serif", 'red', 'right', 'top');

    canvas.elements.push(new Rectangle(0, 0, 800, 600, 'white', 'css/fondo2.png'));
    canvas.elements.push(new Rectangle(0, 237, 240, 363, 'transparent', 'img/tanque.png'));
    canvas.elements.push(new StyledText("Simulador", 10, 10, "bold large sans-serif", 'red', 'left', 'top'));
    canvas.elements.push(agua);
    canvas.elements.push(info);
    canvas.elements.push(mathFn);

    function update () {
        agua.y+=1/3;
        agua.height = 360 - agua.y;
        if (agua.y >= 360) {
            agua.y = 260;
        }


        mathFn.to++;
        if (mathFn.to == 300) mathFn.to = 0;

        info.text = "Tiempo: " + Math.floor(mathFn.to / 60).toString() + " seg";

        canvas.frame(update);
    }
    canvas.frame(update);

</script>
</body>
</html>
